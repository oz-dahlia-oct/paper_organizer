# 概要
- ユーザーは、画面上でテーマを１つと優先順位スコア項目を複数個（任意個数）指定できる。また、後続の検索のために、検索設定（過去１年など）を指定できる。
- これらのテーマと優先順位スコア項目は保存される。
- 指定されたテーマに基づいて、要素を自動的に分解（生成AI利用、主要素と副要素の２レベルまで）。
- 分解された要素とユーザー指定テーマに関連させて、論文検索用の検索ワードを複数自動生成（生成AI利用）。
- 分解された要素と論文検索用の検索ワードは保存される。
- 生成された検索ワードで、Google Scholar Web ページを検索し、関連する論文をPDFダウンロード。
- PDF の保存先は、テーマと要素に関連づけられている。
- PDF は、画像ファイルに変換される。ただし、１ページごとに２ページ分が画像化される必要がある。これは、後続タスクにおいて、文書のページまたぎの問題に対処するためである。
- PDF は、ローカルのMLLM（マルチモーダルLLM）によって処理され、記載された文書や図が構造化データに変換される
- 構造の設計はあなたに任せるが、イメージとしては以下のような形だ。
```json
{
  "document_id": "1234567890",
  "page": 1,
  "contents": [
    {
      "content_type": "image", // 画像ファイルのパス（グラフや表、画像などの場合）
      "content": "path/to/image.jpg"
    },
    {
      "content_type": "markdown", //　Markdown形式のテキスト（タイトルや本文、リストなど）
      "language": "english",
      "content": "Generative AI is unlocking creativity that once belonged only to the human mind.",
      "translations": [
        {
          "language": "japanese",
          "content": "生成型AIは、かつて人間の心だけに属していた創造性を解き放っています。"
        },
        {
          "language": "chinese",
          "content": "生成型人工智能正在释放曾经只属于人类思维的创造力。"
        }
      ]
    },
    {
      "content_type": "mathjax", // MathJax 表示の数学式
      "content": "$$E=mc^2$$"
    },
    { ... }
  ]
} 
```

- 構造化された文書のうち、本文やキャプションなどに関しては、指定された言語に翻訳する必要があります。
- 構造化された文書のうち、グラフや図、画像などは画像として保存します。
- 元のPDFファイルとページ対応させた状態で、構造化されたデータを読みやすく読むことができます（例えば、左に元PDFの3ページ、右に抽出・構造化された3ページの内容。数式は数式として、画像は画像として、翻訳された文書は文書として見ることができるなど）
- 論文のタイトルやアブストラクト、被引用数、掲載誌などを生成AIが確認し、ユーザー指定の優先順位スコア項目に基づいて論文を評価します。
- その結果は、論文の評価スコアと詳細な評価理由を表示します。
- 検索した結果の論文は、一覧表として提示される必要があります。一覧表には以下の要素が含まれます：
  - 主要素
  - 副要素
  - 論文タイトル
  - 著者名
  - 投稿日付
  - 被引用数
  - 掲載誌名
  - アブストラクト（和訳や中文も含める）
  - ユーザー指定の優先順位スコア項目に基づいて評価されたスコア（全種類のスコア項目に対して表示）
  - 評価理由（全種類のスコア項目に対して表示）

# インフラ設計
- 画面は、React.js を用いる
- バックエンドは pyhon Flask を用いる
- 自分自身や身内だけが使用できれば良い想定です
- 画面は、シンプルで使いやすい設計を推奨します
- 実行は現時点では、ラップトップでの実行を想定しています（ローカルLLMを使用することを前提としているため）
- データの保存は Google Cloud を想定しています
  - データベースは、コスト最優先でスキーマレスなデータベースを選択してください。例: Firestore
  - ブロブストレージは、Google Cloud Storage を想定しています

# 想定使用ツール
- uv （パッケージ管理）
- pyproject.toml （パッケージ定義など）
- React.js（画面）
- Flask
- Google Cloud Firestore
- Google Cloud Storage
- PyData Google Auth
- PyArrow
- Scikit-Learn
- Jinja2
- Python-dotenv
- PyYAML
- Pydantic
- sphinx

# Python コーディング規約
- PEP 8 を遵守します。
- テストコードは pytest を使用します。
- ドキュメントは Sphinx を使用します。
- docstring は Numpy 記法で日本語で記述します。

# その他の前提条件
- すでにリポジトリは作成済み（paper_organizer）